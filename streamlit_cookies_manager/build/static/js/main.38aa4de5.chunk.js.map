{"version":3,"sources":["index.ts"],"names":["targetDocument","window","parent","document","lastValue","Streamlit","events","addEventListener","RENDER_EVENT","event","data","detail","queue","args","Object","keys","forEach","name","spec","value","cookie","concat","encodeURIComponent","domain","path","date","Date","expires_at","toUTCString","newValue","saveOnly","setComponentValue","setComponentReady","setFrameHeight"],"mappings":"oIAAA,kBAEA,MACMA,GADuBC,OAAOC,QAAUD,QACVE,SAEpC,IAAIC,EAA2B,KA6B/BC,IAAUC,OAAOC,iBAAiBF,IAAUG,cAZ5C,SAAkBC,GACd,MAAMC,EAAQD,EAAkCE,OAgBpD,IAAqBC,IAdLF,EAAKG,KAAY,MAe7BC,OAAOC,KAAKH,GAAOI,SAASC,IACxB,MAAMC,EAAON,EAAMK,GACnB,GAAmB,OAAfC,EAAKC,MACLnB,EAAeoB,OACX,GAAAC,OAAGC,mBAAmBL,GAAK,qBAE1BC,EAAKK,OAAM,WAAAF,OAAcC,mBAAmBJ,EAAKK,QAAO,SAAS,SAAAF,OACzDC,mBAAmBJ,EAAKM,MAAK,SAEzC,CACD,MAAMC,EAAO,IAAIC,KAAKR,EAAKS,YAC3B3B,EAAeoB,OACX,GAAAC,OAAGC,mBAAmBL,GAAK,KAAAI,OAAIC,mBAAmBJ,EAAKC,OAAM,iBAAAE,OACjDI,EAAKG,cAAa,KAAG,SAAAP,OACxBC,mBAAmBJ,EAAKM,MAAK,IAE9C,KA7BJ,MAAMK,EAAW7B,EAAeoB,OAC5BhB,IAAcyB,GAAanB,EAAKG,KAAKiB,WACrCzB,IAAU0B,kBAAkBF,GAC5BzB,EAAYyB,EAEpB,IAGAxB,IAAU2B,oBACV3B,IAAU4B,eAAe,E","file":"static/js/main.38aa4de5.chunk.js","sourcesContent":["import {RenderData, Streamlit} from \"streamlit-component-lib\"\n\nconst targetWindow: Window = window.parent || window\nconst targetDocument = targetWindow.document\n\nlet lastValue: string | null = null\n\ninterface AddCookieSpec {\n    value: string\n    expires_at: string\n    path: string\n    domain: string\n}\n\ninterface DeleteCookieSpec {\n    value: null\n    path: string\n    domain: string\n}\n\ntype CookieSpec = AddCookieSpec | DeleteCookieSpec\n\nfunction onRender(event: Event): void {\n    const data = (event as CustomEvent<RenderData>).detail\n\n    saveCookies(data.args[\"queue\"])\n\n    const newValue = targetDocument.cookie\n    if (lastValue !== newValue && !data.args.saveOnly) {\n        Streamlit.setComponentValue(newValue)\n        lastValue = newValue\n    }\n}\n\nStreamlit.events.addEventListener(Streamlit.RENDER_EVENT, onRender)\nStreamlit.setComponentReady()\nStreamlit.setFrameHeight(0)\n\n\nfunction saveCookies(queue: { [k in string]: CookieSpec }) {\n    Object.keys(queue).forEach((name) => {\n        const spec = queue[name]\n        if (spec.value === null)\n            targetDocument.cookie = (\n                `${encodeURIComponent(name)}=;` +\n                ` max-age=0;` +\n                (spec.domain ? ` domain=${encodeURIComponent(spec.domain)};` : ``) +\n                ` path=${encodeURIComponent(spec.path)};`\n            )\n        else {\n            const date = new Date(spec.expires_at)\n            targetDocument.cookie = (\n                `${encodeURIComponent(name)}=${encodeURIComponent(spec.value)};` +\n                ` expires=${date.toUTCString()};` +\n                ` path=${encodeURIComponent(spec.path)};`\n            )\n        }\n    })\n}"],"sourceRoot":""}